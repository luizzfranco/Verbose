<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Cutive+Mono&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;1,100;1,200;1,300;1,400;1,500;1,600;1,700&display=swap" rel="stylesheet">    
    <link rel="stylesheet" href="/style.css">
    <title>Document</title>
</head>
<body>
    
    <p>A <strong>Toolbar</strong> é um dos elementos de design mais importantes do Android, tendo o objetivo de mostrar ao usuário, de forma facilitada, ações e funcionalidades básicas do aplicativo, como um menu e um mecanismo de busca.</p>
    <p>Neste tutorial, vamos construir um aplicativo simples e implementar uma Toolbar básica e funcional do zero, esclarecendo algumas dúvidas comuns que podem surgir quando se está iniciando no desenvolvimento Android (como, por exemplo, qual a diferença entre uma <em>action bar</em> e uma <em>Toolbar</em>) e seguindo as melhores práticas recomendadas pelo <strong>Google</strong> e pelas <em>guidelines</em> do <strong>Material Design</strong>.</p>
    <p>Ao final, você deve ter um aplicativo semelhante a esse, com uma Toolbar com um botão de busca e um botão que abre um <em>menu overflow</em> com outras funcionalidades do aplicativo: </p>
    <p><img src="https://user-images.githubusercontent.com/65632456/103026052-d1c51400-4531-11eb-9e97-3d8160619801.jpeg" alt="alt text"></p>
    <p>Na segunda tela, há ainda uma seta para retornar à tela principal, conhecida como <em>up button</em>:</p>
    <p><img src="https://user-images.githubusercontent.com/65632456/103026200-1fda1780-4532-11eb-90c2-ce53808b7326.jpeg" alt="alt text"></p>
    <p><strong>Pré-requisitos:</strong> Conhecimentos básicos de Android Studio e Kotlin
    <strong>SDK mínimo utilizado no projeto:</strong> API 23: Android 6.0 (Marshmallow)
    <strong>Versão do Android Studio utilizada no projeto:</strong> 4.1.1</p>
    <p>Você pode conferir o código-fonte completo deste projeto [neste repositório do Github] (<a href="https://github.com/luizzfranco/Tutorial-Toolbar">https://github.com/luizzfranco/Tutorial-Toolbar</a>).</p>
    <h3 id="1-criando-o-projeto">1. Criando o projeto</h3>
    <p>Para começar, vamos criar um projeto básico com uma <em>Empty Activity</em>. Vou nomear o meu aplicativo de <em>Tutorial Toolbar</em>. Para este projeto, iremos utilizar a linguagem <strong>Kotlin</strong> e a versão mínima do Android será a 6.0 (<strong>API 23</strong>). </p>
    <p><img src="https://user-images.githubusercontent.com/65632456/103026709-3cc31a80-4533-11eb-96a5-d6e8f11d428d.jpg" alt="creatingproject"></p>
    <h3 id="2-desativando-a-action-bar">2. Desativando a action bar</h3>
    <p>Por padrão, a nossa <em>Empty Activity</em> já possui uma <em>action bar</em>. A <em>Toolbar</em> foi introduzida apenas no Android 5.0 (<strong>API 21</strong>). As boas práticas do <strong>Google</strong> recomendam, para o desenvolvimento de aplicativos modernos, o uso de uma <em>Toolbar</em> no lugar da <em>action bar</em> padrão. Ela nada mais é do que uma generalização mais flexível e moderna da <em>action bar</em>, podendo ser inserida em qualquer lugar do aplicativo e possuindo suporte a um maior conjunto de funcionalidades - além de poder ser configurada, com poucas linhas de código, para incorporar todas as funcionalidades e métodos de uma <em>action bar</em> padrão. E é exatamente o que vamos fazer neste projeto.</p>
    <p>O primeiro arquivo a ser alterado será o <em>themes.xml</em>. No modo de visualização <em>Android</em> (e não <em>Project</em>), ele está na pasta <code>app/res/values/themes</code>. Se você estiver usando outra versão do Android Studio, é possível que ele esteja localizado em outro lugar. Seu objetivo é mudar o tema do aplicativo. </p>
    <p><img src="https://user-images.githubusercontent.com/65632456/103026784-6419e780-4533-11eb-9644-344e93f4326e.jpg" alt="themes"></p>
    <p>O tema <em>default</em>, no Android Studio 4.1.1, é <code>Theme.MaterialComponents.DayNight.DarkActionBar</code>. Você vai substitui-lo pela variação <code>NoActionBar</code>. Seu código deverá ficar assim:</p>
    <pre><code class="lang-xml"><span class="hljs-tag">&lt;<span class="hljs-name">resources</span> <span class="hljs-attr">xmlns:tools</span>=<span class="hljs-string">"http://schemas.android.com/tools"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"Theme.TutorialToolbar"</span> <span class="hljs-attr">parent</span>=<span class="hljs-string">"Theme.MaterialComponents.DayNight.NoActionBar"</span>&gt;</span><span class="undefined">
    ...
        </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">resources</span>&gt;</span>
    </code></pre>
    <h3 id="3-criando-a-toolbar">3. Criando a Toolbar</h3>
    <p>Agora que a <em>action bar</em> foi desativada, vamos criar a nossa Toolbar. Ela será criada como um arquivo <em>xml</em> dentro da pasta <code>app/res/layout</code>. Também poderíamos criá-la como um <em>widget</em>, dentro do arquivo de <em>layout</em> da nossa <em>Main Activity</em>. Mas, desta forma, precisaríamos copiar ou reescrever o código de <em>layout</em> da Toolbar em cada <em>Activity</em>. Criando um arquivo separado, basta incluí-la com a tag <code>include</code>, como vamos ver posteriormente.</p>
    <p>Para criá-la, basta ir com o botão direito em layout e selecionar <strong>New &gt; Layout Resource File</strong>. Vamos chamar o nosso arquivo simplesmente de <em>toolbar</em>. Em <em>Root element</em>, vamos substituir o que quer que esteja escrito por <em>androidx.appcompat.widget.Toolbar</em> e clicar em Ok.</p>
    <p><img src="https://user-images.githubusercontent.com/65632456/103026838-7e53c580-4533-11eb-8cac-16177bf4b5f0.jpg" alt="newtoolbar"></p>
    <p>Em seguida, vamos nomeá-la com o id <em>toolbar</em>, para podermos identificá-la em nossa Main Activity. Para a Toolbar ocupar toda a largura da tela, mas ficar posicionada apenas como uma barra superior, sua largura será definida como <code>match_parent</code> e sua altura como <code>wrap_content</code>. Por hora, iremos apenas diferenciá-la da cor do fundo do aplicativo alterando seu <em>background</em> para a cor primária padrão do aplicativo. O código da sua Toolbar deverá estar assim por enquanto:</p>
    <pre><code class="lang-xml"><span class="php"><span class="hljs-meta">&lt;?</span>xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"utf-8"</span><span class="hljs-meta">?&gt;</span></span>
    <span class="hljs-tag">&lt;<span class="hljs-name">androidx.appcompat.widget.Toolbar</span> <span class="hljs-attr">xmlns:android</span>=<span class="hljs-string">"http://schemas.android.com/apk/res/android"</span>
        <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/toolbar"</span>
        <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
        <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"wrap_content"</span>
        <span class="hljs-attr">android:background</span>=<span class="hljs-string">"?attr/colorPrimary"</span>
        &gt;</span>
    
    <span class="hljs-tag">&lt;/<span class="hljs-name">androidx.appcompat.widget.Toolbar</span>&gt;</span>
    </code></pre>
    <h3 id="4-implementando-a-toolbar-na-main-activity">4. Implementando a Toolbar na Main Activity</h3>
    <p>Agora que temos o nosso primeiro protótipo da Toolbar, vamos implementá-la em nossa Main Activity e programá-la para incorporar todos os métodos e funções de uma <em>action bar</em>, através do método <code>setSupportActionBar()</code>. Em <strong>Kotlin</strong>, temos duas maneiras de fazer isso:</p>
    <ul>
    <li>Criando uma variável para receber a Toolbar, atribuindo a ela a toolbar criada dentro da pasta de <em>Resources</em> e, em seguida, a usando como parâmetro para chamar o método.</li>
    </ul>
    <pre><code class="lang-kotlin">val toolbar = findViewById&lt;Toolbar&gt;(R<span class="hljs-selector-class">.id</span><span class="hljs-selector-class">.toolbar</span>)
    <span class="hljs-function"><span class="hljs-title">setSupportActionBar</span><span class="hljs-params">(toolbar)</span></span>
    </code></pre>
    <ul>
    <li>Utilizando uma sintaxe reduzida e chamando o método referenciando diretamente o arquivo da toolbar, sem necessidade de criar uma variável.</li>
    </ul>
    <pre><code class="lang-kotlin">setSupportActionBar(<span class="hljs-name">findViewById</span>(<span class="hljs-name">R</span>.id.toolbar))
    </code></pre>
    <p>Neste projeto, vamos utilizar a primeira maneira, porque iremos chamar a variável para manipular um detalhe da Toolbar com mais facilidade no futuro.</p>
    <p>Se você rodar o projeto no seu emulador neste ponto, verá que ainda não temos uma Toolbar, porque ainda não a incluímos no arquivo <em>xml</em> da nossa Main Activity. Para isso, basta ir até este arquivo, dentro da pasta <em>layout</em>, e inserir a tag <code>include</code> com o atributo <em>layout</em> indicando o arquivo da Toolbar, desta forma:</p>
    <pre><code class="lang-xml"><span class="php"><span class="hljs-meta">&lt;?</span>xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"utf-8"</span><span class="hljs-meta">?&gt;</span></span>
    <span class="hljs-tag">&lt;<span class="hljs-name">androidx.constraintlayout.widget.ConstraintLayout</span> <span class="hljs-attr">xmlns:android</span>=<span class="hljs-string">"http://schemas.android.com/apk/res/android"</span>
        <span class="hljs-attr">xmlns:app</span>=<span class="hljs-string">"http://schemas.android.com/apk/res-auto"</span>
        <span class="hljs-attr">xmlns:tools</span>=<span class="hljs-string">"http://schemas.android.com/tools"</span>
        <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
        <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
        <span class="hljs-attr">tools:context</span>=<span class="hljs-string">".MainActivity"</span>&gt;</span>
    
        <span class="hljs-tag">&lt;<span class="hljs-name">include</span> <span class="hljs-attr">layout</span>=<span class="hljs-string">"@layout/toolbar"</span>/&gt;</span>
    ...
    <span class="hljs-tag">&lt;/<span class="hljs-name">androidx.constraintlayout.widget.ConstraintLayout</span>&gt;</span>
    </code></pre>
    <p>Agora, você deverá ter uma Toolbar simples, apenas com o nome do aplicativo, desse jeito:</p>
    <p><img src="https://user-images.githubusercontent.com/65632456/103026883-988da380-4533-11eb-87ce-3c80ed76da6a.jpeg" alt="toolbar1"></p>
    <h3 id="5-criando-o-menu">5. Criando o Menu</h3>
    <p>Agora que criamos a Toolbar, precisamos dar algum sentido a ela - implementando um menu! Assim como fizemos com a própria Toolbar, criaremos um arquivo separado para o menu. Para isso, vamos clicar com o botão direito na pasta <code>res</code> e <strong>New &gt; Android Resource Directory</strong>. Vamos nomeá-lo simplesmente como <em>menu</em> e alterar o seu tipo, também, para menu, desta forma:</p>
    <p><img src="https://user-images.githubusercontent.com/65632456/103026921-a9d6b000-4533-11eb-8b19-0890e47fcfef.jpg" alt="newmenu"></p>
    <p>Agora, com o botão direito na recém-criada pasta menu,  selecionamos <strong>New &gt; Menu Resource File</strong>. Iremos nomear esse arquivo de <em>main_menu</em>. Se tudo der certo, você terá um novo arquivo <em>main_menu.xml</em> dentro da pasta <code>app/res/menu</code>, e poderá editá-lo tanto alterando seu código <em>xml</em> quanto no editor visual do <strong>Android Studio</strong>, como em qualquer arquivo <em>xml</em>.</p>
    <p>(Neste ponto, recomendo que você brinque um pouco no editor visual e explore as diferentes possibilidades de organização de um menu.)</p>
    <p>Para este projeto, vamos utilizar um <em>action button</em> de busca e duas opções de funcionalidade dentro de um <em>menu overflow</em> (aqueles três pontinhos que ficam no canto direito da Toolbar, comuns em aplicativos como o <strong>WhatsApp</strong>). Você pode fazer isso arrastando elementos no editor visual ou editando seu arquivo <em>xml</em>. A princípio, vou apenas nomear as funcionalidades de forma genérica e definir os id&#39;s: irei chamar o item de busca de <em>search</em>, a primeira funcionalidade de <em>func1</em> e, a segunda, de <em>func2</em>. Seu código deverá ficar assim:</p>
    <pre><code class="lang-xml"><span class="php"><span class="hljs-meta">&lt;?</span>xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"utf-8"</span><span class="hljs-meta">?&gt;</span></span>
    <span class="hljs-tag">&lt;<span class="hljs-name">menu</span> <span class="hljs-attr">xmlns:app</span>=<span class="hljs-string">"http://schemas.android.com/apk/res-auto"</span>
        <span class="hljs-attr">xmlns:android</span>=<span class="hljs-string">"http://schemas.android.com/apk/res/android"</span>&gt;</span>
    
        <span class="hljs-tag">&lt;<span class="hljs-name">item</span>
            <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/search"</span>
            <span class="hljs-attr">android:title</span>=<span class="hljs-string">"Busca"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">item</span>
            <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/func1"</span>
            <span class="hljs-attr">android:title</span>=<span class="hljs-string">"Funcionalidade 1"</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">item</span>
            <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/func2"</span>
            <span class="hljs-attr">android:title</span>=<span class="hljs-string">"Funcionalidade 2"</span> /&gt;</span>
    
    
    <span class="hljs-tag">&lt;/<span class="hljs-name">menu</span>&gt;</span>
    </code></pre>
    <p>Perceba que a nossa Busca está aparecendo dentro do menu flutuante - e não ao lado, como gostaríamos. Isso acontece porque ainda não configuramos a propriedade <code>showAsAction</code> do item - que, por <em>default</em>, aparece dentro do menu.</p>
    <p>Essa propriedade pode receber 5 valores diferentes:</p>
    <ol>
    <li><code>always</code></li>
    <li><code>never</code></li>
    <li><code>ifRoom</code></li>
    <li><code>withText</code></li>
    <li><code>collapseActionView</code></li>
    </ol>
    <p>O valor <code>always</code> <em>sempre</em> mostra o item na barra do menu, já o valor <code>never</code> <em>nunca</em> o mostra, e o <code>ifRoom</code> mostra apenas no caso de haver espaço (de acordo com o tamanho da tela e da quantidade de elementos na barra). <code>withText</code> o inclui junto com o atributo <code>title</code> do item, e o <code>collapseActionView</code> permite que a visualização possa ser recolhida. Neste projeto, iremos utilizar apenas os dois primeiros. Para mais detalhes, você pode consultar a [documentação oficial] (<a href="https://developer.android.com/guide/topics/resources/menu-resource">https://developer.android.com/guide/topics/resources/menu-resource</a>).</p>
    <p>No item da busca, iremos incluir, portanto, a propriedade <code>app:showAsAction=&quot;always&quot;</code>, para que ele sempre apareça. </p>
    <p>Agora, para que o nosso aplicativo fique mais parecido com um aplicativo moderno e profissional, precisamos incluir o ícone de busca no lugar da palavra <em>Busca</em>, dentro do menu flutuante. Para isso, vamos clicar com o botão direito na pasta <em>drawable</em> - a pasta que guarda todos os arquivos de imagens do nosso projeto - e vamos em <strong>New &gt; Vector Asset</strong>, que vai abrir a ferramenta <strong>Asset Studio</strong>, criada para auxiliar desenvolvedores a incluir ícones de uma maneira simples e prática. Para buscar o ícone que queremos, vamos clicar em <em>Clip Art</em> e, na barra de busca, pesquisar pela palavra-chave <em>search</em>, selecionando em seguida o ícone da lupa. Seu nome, por padrão, é <em>ic_baseline_search_24</em>. Vamos mantê-lo assim, mas você pode alterá-lo para um nome mais conciso (como <em>ic_search</em>, por exemplo) se quiser. Como a nossa Toolbar tem uma cor escura, também vamos mudar a cor do ícone para a cor branca, cujo código é #FFFFFF. Se tiver alguma dúvida, consulte a imagem abaixo. Em seguida, é só clicar em <strong>Next &gt; Finish</strong>. Nosso ícone está criado!</p>
    <p><img src="https://user-images.githubusercontent.com/65632456/103028150-eacfc400-4535-11eb-8f4b-96af156d445b.jpg" alt="search icon"></p>
    <p>De volta ao nosso arquivo <em>menu.xml</em>, basta incluir o atributo <code>icon</code> no nosso item de busca e definir o caminho para encontrá-lo dentro da pasta <em>drawable</em>. Seu código final do menu ficará desse jeito:</p>
    <pre><code class="lang-xml"><span class="php"><span class="hljs-meta">&lt;?</span>xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"utf-8"</span><span class="hljs-meta">?&gt;</span></span>
    <span class="hljs-tag">&lt;<span class="hljs-name">menu</span> <span class="hljs-attr">xmlns:app</span>=<span class="hljs-string">"http://schemas.android.com/apk/res-auto"</span>
        <span class="hljs-attr">xmlns:android</span>=<span class="hljs-string">"http://schemas.android.com/apk/res/android"</span>&gt;</span>
    
        <span class="hljs-tag">&lt;<span class="hljs-name">item</span>
            <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/search"</span>
            <span class="hljs-attr">android:title</span>=<span class="hljs-string">"Busca"</span>
            <span class="hljs-attr">app:showAsAction</span>=<span class="hljs-string">"always"</span>
            <span class="hljs-attr">android:icon</span>=<span class="hljs-string">"@drawable/ic_baseline_search_24"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">item</span>
            <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/func1"</span>
            <span class="hljs-attr">android:title</span>=<span class="hljs-string">"Funcionalidade 1"</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">item</span>
            <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/func2"</span>
            <span class="hljs-attr">android:title</span>=<span class="hljs-string">"Funcionalidade 2"</span> /&gt;</span>
    
    <span class="hljs-tag">&lt;/<span class="hljs-name">menu</span>&gt;</span>
    </code></pre>
    <h3 id="6-inflando-o-menu-na-main-activity">6. Inflando o menu na Main Activity</h3>
    <p>Temos o nosso menu criado, mas ele ainda não está aparecendo em nossa Main Activity, porque precisamos &quot;inflá-lo&quot; chamando a função <code>onCreateOptionsMenu()</code> e o método <code>MenuInflater.inflate()</code>. Esse é o código que você deverá incluir em sua Activity:</p>
    <pre><code class="lang-kotlin"> <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreateOptionsMenu</span><span class="hljs-params">(menu: <span class="hljs-type">Menu</span>?)</span></span>: <span class="hljs-built_in">Boolean</span> {
            menuInflater.inflate(R.menu.main_menu, menu)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
        }
    </code></pre>
    <p>Note que esse código deverá ser incluído fora do escopo do método <code>onCreate()</code>, como todo <code>override</code>, e que o <code>import android.view.Menu</code> deverá ser incluído no topo do seu código.</p>
    <p>Agora, seu aplicativo deverá estar desse jeito:</p>
    <p><img src="https://user-images.githubusercontent.com/65632456/103027055-eb675b00-4533-11eb-8e0c-4eba96067f70.jpeg" alt="toolbar2"></p>
    <h3 id="7-implementando-eventos-de-clique">7. Implementando eventos de clique</h3>
    <p>Agora que temos alguns botões de ação no menu da nossa Toolbar, vamos implementar eventos de clique a eles! Como esse é um tutorial simples e com foco na implementação da Toobar, cada botão irá apenas disparar um <em>toast</em> (aquelas notificações rápidas que aparecem em uma barra cinza no pé da tela em aplicativos Android).</p>
    <p>O método chamado pelo sistema quando o usuário clica em um dos botões do menu é o <code>onOptionsItemSelected()</code>, que passa o <code>MenuItem</code> selecionado como parâmetro. Para identificar o item dentro da nossa pasta de <em>resources</em>, chamamos o <code>getItemId()</code>. Essa função utiliza a sintaxe <em>when</em> e pode gerar alguma confusão por utilizar o operador de seta (-&gt;), assim como funções <em>lambda</em>.  Por hora, basta entender que não se trata de uma função <em>lambda</em>, e que a condicional <em>when</em> exige a implementação de um <em>else</em>, que, nesse caso, é resolvido com a palavra-chave <code>super</code>. Pode parecer um pouco confuso, mas fica mais claro com a leitura do código. Lembre-se que, no começo, você não precisa necessariamente entender como tudo funciona por baixo dos panos, e que, na programação, é preciso ter paciência. Detalhes podem ser encontrados na [documentação oficial do Kotlin] (<a href="https://kotlinlang.org/docs/reference/grammar.html#whenEntry">https://kotlinlang.org/docs/reference/grammar.html#whenEntry</a>).</p>
    <p>O código abaixo deverá ser inserido fora do escopo do método <code>onCreate()</code>, e demandará os imports <code>import android.view.MenuItem</code> e <code>import android.widget.Toast</code>. Para mais detalhes sobre notificações toast, também recomendo a leitura da [documentação oficial] (<a href="https://developer.android.com/guide/topics/ui/notifiers/toasts">https://developer.android.com/guide/topics/ui/notifiers/toasts</a>).</p>
    <pre><code class="lang-kotlin"><span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onOptionsItemSelected</span><span class="hljs-params">(item: <span class="hljs-type">MenuItem</span>)</span></span> = <span class="hljs-keyword">when</span> (item.itemId) {
            R.id.search -&gt; {
                Toast.makeText(<span class="hljs-keyword">this</span>, <span class="hljs-string">"Buscar item"</span>, Toast.LENGTH_LONG).show()
                <span class="hljs-literal">true</span>
            }
            R.id.func1 -&gt; {
                Toast.makeText(<span class="hljs-keyword">this</span>, <span class="hljs-string">"Funcionalidade 1"</span>, Toast.LENGTH_LONG).show()
                <span class="hljs-literal">true</span>
            }
            R.id.func2 -&gt; {
                Toast.makeText(<span class="hljs-keyword">this</span>, <span class="hljs-string">"Funcionalidade 2"</span>, Toast.LENGTH_LONG).show()
                <span class="hljs-literal">true</span>
            }
            <span class="hljs-keyword">else</span> -&gt; {
                <span class="hljs-keyword">super</span>.onOptionsItemSelected(item)
            }
        }
    </code></pre>
    <h3 id="8-criando-uma-nova-tela">8. Criando uma nova tela</h3>
    <p>Nossa Toolbar está ficando cada vez mais pronta. Agora, vamos criar uma nova tela para inserir o botão de retorno, conhecido como <em>up button</em>, que retorna à atividade pai. </p>
    <p>Para criar uma nova tela, basta clicar com o botão direito no primeiro arquivo dentro da sua pasta <em>java</em> e <strong>New &gt; Activity &gt; Empty Activity</strong>. Irei nomeá-la de <em>ChildActivity</em>.</p>
    <p>A primeira coisa que vamos fazer nesta nova tela é implementar a Toolbar. Assim como fizemos com a MainActivity, iremos chamar o método <code>setSupportActionBar()</code> com o seguinte código:</p>
    <pre><code class="lang-kotlin">val toolbar = findViewById&lt;Toolbar&gt;(R<span class="hljs-selector-class">.id</span><span class="hljs-selector-class">.toolbar</span>)
    <span class="hljs-function"><span class="hljs-title">setSupportActionBar</span><span class="hljs-params">(toolbar)</span></span>
    </code></pre>
    <p>Também iremos torná-la uma filha da tela principal, para que ela herde os eventos de clique que acabamos de implementar. O editor do <strong>Android Studio</strong> automaticamente irá sinalizar (como faz com os imports pendentes) e pedir para tornar a MainActivity uma classe aberta. O código da ChildActivity ficará assim:</p>
    <pre><code class="lang-kotlin"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ChildActivity</span> : <span class="hljs-type">MainActivity</span></span>() {
        <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
            <span class="hljs-keyword">super</span>.onCreate(savedInstanceState)
            setContentView(R.layout.activity_child)
    
            <span class="hljs-keyword">val</span> toolbar = findViewById&lt;Toolbar&gt;(R.id.toolbar)
            setSupportActionBar(toolbar)
        }
    }
    </code></pre>
    <p>E, no arquivo <em>activity_child.xml</em>, iremos inserir o <code>&lt;include layout=&quot;@layout/toolbar&quot;/&gt;</code>. Também vou colocar um <em>TextView</em> simples, com um texto qualquer (no meu caso, será &quot;E aí&quot;) e vou aumentar o tamanho dele para <em>24sp</em>, apenas para facilitar a leitura. Lembrando que estou usando o <em>Constraint Layout</em> no meu projeto, mas você pode usar o que se sentir mais à vontade. Meu código ficará assim:</p>
    <pre><code class="lang-xml"><span class="php"><span class="hljs-meta">&lt;?</span>xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"utf-8"</span><span class="hljs-meta">?&gt;</span></span>
    <span class="hljs-tag">&lt;<span class="hljs-name">androidx.constraintlayout.widget.ConstraintLayout</span> <span class="hljs-attr">xmlns:android</span>=<span class="hljs-string">"http://schemas.android.com/apk/res/android"</span>
        <span class="hljs-attr">xmlns:app</span>=<span class="hljs-string">"http://schemas.android.com/apk/res-auto"</span>
        <span class="hljs-attr">xmlns:tools</span>=<span class="hljs-string">"http://schemas.android.com/tools"</span>
        <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
        <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
        <span class="hljs-attr">tools:context</span>=<span class="hljs-string">".ChildActivity"</span>&gt;</span>
    
        <span class="hljs-tag">&lt;<span class="hljs-name">include</span> <span class="hljs-attr">layout</span>=<span class="hljs-string">"@layout/toolbar"</span>/&gt;</span>
    
        <span class="hljs-tag">&lt;<span class="hljs-name">TextView</span>
            <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/textView2"</span>
            <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"wrap_content"</span>
            <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"wrap_content"</span>
            <span class="hljs-attr">android:text</span>=<span class="hljs-string">"E aí"</span>
            <span class="hljs-attr">android:textSize</span>=<span class="hljs-string">"24sp"</span>
            <span class="hljs-attr">app:layout_constraintBottom_toBottomOf</span>=<span class="hljs-string">"parent"</span>
            <span class="hljs-attr">app:layout_constraintEnd_toEndOf</span>=<span class="hljs-string">"parent"</span>
            <span class="hljs-attr">app:layout_constraintStart_toStartOf</span>=<span class="hljs-string">"parent"</span>
            <span class="hljs-attr">app:layout_constraintTop_toTopOf</span>=<span class="hljs-string">"parent"</span> /&gt;</span>
    
    <span class="hljs-tag">&lt;/<span class="hljs-name">androidx.constraintlayout.widget.ConstraintLayout</span>&gt;</span>
    </code></pre>
    <p>Para navegar até essa tela, vamos voltar ao arquivo <em>activity_main.xml</em> e inserir um botão, cuja posição será abaixo do <em>TextView</em>, também através do <em>Constraint Layout</em>. Vou colocar um texto qualquer no botão (&quot;Opa&quot;) e fazer algumas alterações, também, no <em>TextView</em>. Irei mudar seu texto para &quot;Olá Toolbar&quot;, aumentar seu tamanho de fonte para <em>24dp</em> e posicioná-lo um pouco acima do meio no eixo vertical  da tela. Meu código ficará assim:</p>
    <pre><code class="lang-xml">&lt;?xml <span class="hljs-keyword">version</span>=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"utf-8"</span>?&gt;
    &lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=<span class="hljs-string">"http://schemas.android.com/apk/res/android"</span>
        xmlns:<span class="hljs-keyword">app</span>=<span class="hljs-string">"http://schemas.android.com/apk/res-auto"</span>
        xmlns:tools=<span class="hljs-string">"http://schemas.android.com/tools"</span>
        android:layout_width=<span class="hljs-string">"match_parent"</span>
        android:layout_height=<span class="hljs-string">"match_parent"</span>
        tools:context=<span class="hljs-string">".MainActivity"</span>&gt;
    
        &lt;<span class="hljs-keyword">include</span> layout=<span class="hljs-string">"@layout/toolbar"</span>/&gt;
    
        &lt;TextView
            android:id=<span class="hljs-string">"@+id/textView"</span>
            android:layout_width=<span class="hljs-string">"wrap_content"</span>
            android:layout_height=<span class="hljs-string">"wrap_content"</span>
            android:text=<span class="hljs-string">"Olá Toolbar"</span>
            android:textSize=<span class="hljs-string">"24sp"</span>
            <span class="hljs-keyword">app</span>:layout_constraintBottom_toBottomOf=<span class="hljs-string">"parent"</span>
            <span class="hljs-keyword">app</span>:layout_constraintEnd_toEndOf=<span class="hljs-string">"parent"</span>
            <span class="hljs-keyword">app</span>:layout_constraintStart_toStartOf=<span class="hljs-string">"parent"</span>
            <span class="hljs-keyword">app</span>:layout_constraintTop_toTopOf=<span class="hljs-string">"parent"</span>
            <span class="hljs-keyword">app</span>:layout_constraintVertical_bias=<span class="hljs-string">"0.32"</span> /&gt;
    
        &lt;Button
            android:id=<span class="hljs-string">"@+id/button"</span>
            android:layout_width=<span class="hljs-string">"wrap_content"</span>
            android:layout_height=<span class="hljs-string">"wrap_content"</span>
            android:layout_marginTop=<span class="hljs-string">"16dp"</span>
            android:text=<span class="hljs-string">"Opa"</span>
            <span class="hljs-keyword">app</span>:layout_constraintEnd_toEndOf=<span class="hljs-string">"@+id/textView"</span>
            <span class="hljs-keyword">app</span>:layout_constraintStart_toStartOf=<span class="hljs-string">"@+id/textView"</span>
            <span class="hljs-keyword">app</span>:layout_constraintTop_toBottomOf=<span class="hljs-string">"@+id/textView"</span> /&gt;
    
    &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;
    </code></pre>
    <p>No código principal da MainActivity, vamos criar uma variável para armazenar o recurso do botão e implementar um <code>ClickListener</code> para navegar até a ChildActivity. O código ficará assim:</p>
    <pre><code class="lang-kotlin"><span class="hljs-keyword">open</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MainActivity</span> : <span class="hljs-type">AppCompatActivity</span></span>() {
        <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
            <span class="hljs-keyword">super</span>.onCreate(savedInstanceState)
            setContentView(R.layout.activity_main)
    
            <span class="hljs-keyword">val</span> toolbar = findViewById&lt;Toolbar&gt;(R.id.toolbar)
            setSupportActionBar(toolbar)
    
            <span class="hljs-keyword">val</span> button = findViewById&lt;Button&gt;(R.id.button)
            button.setOnClickListener {
                <span class="hljs-keyword">val</span> mIntent = Intent(<span class="hljs-keyword">this</span>, ChildActivity::<span class="hljs-class"><span class="hljs-keyword">class</span>.<span class="hljs-title">java</span>)</span>
                startActivity(mIntent)
            }
    
        }
    
        <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreateOptionsMenu</span><span class="hljs-params">(menu: <span class="hljs-type">Menu</span>?)</span></span>: <span class="hljs-built_in">Boolean</span> {
            menuInflater.inflate(R.menu.main_menu, menu)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
        }
    
        <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onOptionsItemSelected</span><span class="hljs-params">(item: <span class="hljs-type">MenuItem</span>)</span></span> = <span class="hljs-keyword">when</span> (item.itemId) {
            R.id.search -&gt; {
                Toast.makeText(<span class="hljs-keyword">this</span>, <span class="hljs-string">"Buscar item"</span>, Toast.LENGTH_LONG).show()
                <span class="hljs-literal">true</span>
            }
            R.id.func1 -&gt; {
                Toast.makeText(<span class="hljs-keyword">this</span>, <span class="hljs-string">"Funcionalidade 1"</span>, Toast.LENGTH_LONG).show()
                <span class="hljs-literal">true</span>
            }
            R.id.func2 -&gt; {
                Toast.makeText(<span class="hljs-keyword">this</span>, <span class="hljs-string">"Funcionalidade 2"</span>, Toast.LENGTH_LONG).show()
                <span class="hljs-literal">true</span>
            }
            <span class="hljs-keyword">else</span> -&gt; {
                <span class="hljs-keyword">super</span>.onOptionsItemSelected(item)
            }
        }
    }
    </code></pre>
    <h3 id="9-implementando-o-up-button">9. Implementando o up button</h3>
    <p>Para criar o <em>up button</em>, precisamos voltar ao arquivo <em>toolbar.xml</em>, dentro da pasta <code>app/res/layout</code>, e inserir um <code>navigationIcon</code>. </p>
    <p>Primeiro, vamos criar o <em>asset</em> dentro da pasta <code>app/res/drawable</code>, como fizemos com o ícone de busca. Mas, desta vez, vamos selecionar o ícone <em>arrow back</em>, identificado pelo nome <em>ic_baseline_arrow_back_24</em>. Também usaremos a cor branca.</p>
    <p>Para selecioná-lo dentro do arquivo <em>toolbar.xml</em>, basta inserir o atributo <code>app:navigationIcon=&quot;@drawable/ic_baseline_arrow_back_24&quot;</code>.</p>
    <pre><code class="lang-xml"><span class="php"><span class="hljs-meta">&lt;?</span>xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"utf-8"</span><span class="hljs-meta">?&gt;</span></span>
    <span class="hljs-tag">&lt;<span class="hljs-name">androidx.appcompat.widget.Toolbar</span> <span class="hljs-attr">xmlns:android</span>=<span class="hljs-string">"http://schemas.android.com/apk/res/android"</span>
        <span class="hljs-attr">xmlns:app</span>=<span class="hljs-string">"http://schemas.android.com/apk/res-auto"</span>
        <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/toolbar"</span>
        <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
        <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"wrap_content"</span>
        <span class="hljs-attr">android:background</span>=<span class="hljs-string">"?attr/colorPrimary"</span>
        <span class="hljs-attr">app:navigationIcon</span>=<span class="hljs-string">"@drawable/ic_baseline_arrow_back_24"</span>&gt;</span>
    
    <span class="hljs-tag">&lt;/<span class="hljs-name">androidx.appcompat.widget.Toolbar</span>&gt;</span>
    </code></pre>
    <p>Agora, temos um botão de retorno! Mas ele está aparecendo nas duas telas - tanto na Main quanto na ChildActivity - e não está fazendo nada. Queremos que ele apareça apenas na ChildActivity, e que retorne à atividade principal quando clicado. </p>
    <p>Para configurá-lo, basta implementar o método <code>setDisplayHomeAsUpEnabled(Boolean)</code> no código da atividade. Como não queremos que ele apareça na MainActivity, o código implementado nela será <code>supportActionBar?.setDisplayHomeAsUpEnabled(false)</code>. Já na ChildActivity, o código será o mesmo, mas com o parâmetro definido como <code>true</code>.</p>
    <p>Agora que ele está aparecendo em nossa segunda tela, precisamos configurá-lo para retornar à atividade pai. Para isso, vamos até o arquivo <em>AndroidManifest.xml</em>, dentro da pasta <code>app/manifests</code>, e, dentro da tag referente à nossa ChildActivity, incluímos o código <code>android:parentActivityName=&quot;br.com.luizfranco.tutorialtoolbar.MainActivity&quot;</code>. Note que esse código será diferente de acordo com o <em>package name</em> do seu aplicativo.</p>
    <p>Nossa segunda tela está assim, com o <em>up button</em> funcionando perfeitamente:</p>
    <p><img src="https://user-images.githubusercontent.com/65632456/103027134-0df97400-4534-11eb-9734-ec05eea0cf76.jpeg" alt="toolbar3"></p>
    <h3 id="10-ltimos-ajustes">10. Últimos ajustes</h3>
    <p>Nosso aplicativo já está quase idêntico ao que propomos inicialmente, restando apenas alguns ajustes finais. Precisamos alterar o título e a cor do título e do ícone do menu flutuante da Toolbar.</p>
    <p>Para mudar o título, basta retornar ao arquivo <em>toolbar.xml</em> e inserir o atributo <code>app:title=&quot;&quot;</code>. Já para mudar sua cor para branco (já que temos um fundo escuro), é só selecionar <code>app:titleTextColor=&quot;@color/white&quot;</code>. Vou mudar o nome da minha Toolbar para <strong>Toolbar Braba</strong> 😎</p>
    <p>Já para mudar a cor do ícone do menu flutuante (aqueles três pontinhos no canto direito da Toolbar), vamos, novamente, criar um novo <em>asset</em> dentro da pasta <code>app/res/drawable</code>. O nome desse ícone dentro do <em>Asset Studio</em> é <em>ic_baseline_more_vert_24</em> e a cor que iremos definir é, novamente, o branco.</p>
    <p>Para implementar o novo <em>asset</em>, vamos incluir o código <code>toolbar.overflowIcon = getDrawable(R.drawable.ic_baseline_more_vert_24)</code> em cada uma das activities. </p>
    <p>Pronto! Nossa Toolbar está pronta, e você pode personalizá-la e implementá-la da forma que preferir no seu aplicativo 🙌</p>
    <p><img src="https://user-images.githubusercontent.com/65632456/103026052-d1c51400-4531-11eb-9e97-3d8160619801.jpeg" alt="alt text"></p>
    <h3 id="11-considera-es-finais">11. Considerações finais</h3>
    <p>Espero que esse tutorial possa ajudar pessoas que estão começando no desenvolvimento de aplicativos <strong>Android</strong>. </p>
    <p>Eu mesmo sou iniciante e tive dificuldades em encontrar um material atualizado, completo e conciso sobre a implementação de uma Toolbar, o que me motivou a escrever este passo-a-passo. </p>
    <p>Como ainda estou aprendendo, cabe ressaltar que, se por acaso falei algo errado ou deixei de mencionar alguma boa prática recomendada, por favor, me avise nos comentários! </p>
    <p>É isto :)</p>
    <h3 id="12-refer-ncias">12. Referências</h3>
    <ul>
    <li><p>[Adicionar a barra de apps - Documentação oficial] (<a href="https://developer.android.com/training/appbar">https://developer.android.com/training/appbar</a>)</p>
    </li>
    <li><p>[Configurar a barra de apps - Documentação oficial] (<a href="https://developer.android.com/training/appbar/setting-up">https://developer.android.com/training/appbar/setting-up</a>)</p>
    </li>
    <li><p>[Adicionar e processar ações - Documentação oficial] (<a href="https://developer.android.com/training/appbar/actions">https://developer.android.com/training/appbar/actions</a>)</p>
    </li>
    <li><p>[Menus - Documentação oficial] (<a href="https://developer.android.com/guide/topics/ui/menus">https://developer.android.com/guide/topics/ui/menus</a>)</p>
    </li>
    <li><p>[App bars: top - Material Design Components] (<a href="https://material.io/components/app-bars-top">https://material.io/components/app-bars-top</a>)</p>
    </li>
    </ul>
    
    


</body>
</html>